<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DHS Class of 1975 - 50-Year Reunion Registration (Option 2)</title>
  <style>
    /* (Your existing CSS remains unchanged) */
  </style>
</head>

<body>
  <div class="form-container">
    <input type="hidden" id="currentReunionFee" value="45">

    <h1>DHS Class of 1975</h1>
    <h2>50-Year Reunion Registration</h2>
    <h3>Registration Option #2: Register Online, Pay by Check</h3>

    <form id="reunionForm" onsubmit="submitForm(event)">
      <input type="hidden" name="RegistrationFee" value="">
      <input type="hidden" name="TotalDue" id="hiddenTotalDue" value="">

      <!-- (Your existing input fields remain unchanged) -->

      <button type="submit" class="submit-btn">Submit Registration</button>
    </form>

    <div id="thankYouMessage" class="thank-you">
      <h2>Thank You for Registering!</h2>
      <p>Your form was submitted successfully.</p>
    </div>
  </div>

<script>
  function updateSummary() {
    const guestName = document.querySelector('[name="guest_name"]').value.trim();
    const legacyFund = parseFloat(document.querySelector('[name="legacy_fund"]').value) || 0;
    const feePerPerson = parseFloat(document.querySelector('[name="RegistrationFee"]').value) || 45;
    const attendees = guestName ? 2 : 1;
    const reunionFee = attendees * feePerPerson;
    const totalDue = reunionFee + legacyFund;

    document.getElementById('summary-attendees').innerText = attendees;
    document.getElementById('summary-cost').innerText = `$${reunionFee.toFixed(2)}`;
    document.getElementById('summary-legacy').innerText = `$${legacyFund.toFixed(2)}`;
    document.getElementById('summary-total').innerText = `$${totalDue.toFixed(2)}`;
    document.getElementById('hiddenTotalDue').value = totalDue.toFixed(2);
  }

  function formatPhoneNumber(input) {
    const cleaned = ('' + input).replace(/\D/g, '');
    if (cleaned.length === 10) {
      return `(${cleaned.substring(0,3)}) ${cleaned.substring(3,6)}-${cleaned.substring(6,10)}`;
    }
    return input;
  }

  document.addEventListener("DOMContentLoaded", () => {
    const currentFee = parseFloat(document.getElementById('currentReunionFee').value) || 45;
    document.querySelector('[name="RegistrationFee"]').value = currentFee;
    updateSummary();

    document.querySelector('[name="guest_name"]').addEventListener('input', updateSummary);
    document.querySelector('[name="legacy_fund"]').addEventListener('input', updateSummary);

    const phoneInput = document.querySelector('[name="phone"]');
    if (phoneInput) {
      phoneInput.addEventListener('blur', function() {
        phoneInput.value = formatPhoneNumber(phoneInput.value);
      });
    }
  });

  function submitForm(event) {
    event.preventDefault();
    const form = document.getElementById("reunionForm");
    const formData = new FormData(form);

    fetch("https://script.google.com/macros/s/AKfycbxfTsbrrPxmM-NmW9ZD6oSkPmCbCwC0Hp21Ga3c5kkONCnjk6L1MSOTcWLtpmYv5oxAfw/exec", {
      method: "POST",
      body: formData,
      mode: "no-cors"
    })
    .then(() => {
      let params = new URLSearchParams();
      formData.forEach((value, key) => {
        params.append(key, value);
      });
      window.location.href = "thank-you.html?" + params.toString();
    })
    .catch((error) => {
      alert("Something went wrong. Please try again later.");
      console.error("Submission error:", error);
    });
  }
</script>

</body>
</html>







